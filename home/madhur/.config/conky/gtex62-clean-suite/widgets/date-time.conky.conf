--[[
  ~/.config/conky/gtex62-clean-suite/widgets/date-time.conky.conf
  Clock + UTC + date widget

  • Uses theme.lua for font choices (font_time, font_date, font_gmt).
  • Shows local time, UTC time with numeric offset, and YYYY.MM.DD date.
  • Font templates (template4–7) allow the text section to switch fonts.
]]
-- Uses shared theme.lua for fonts/colors/layout
local theme     = dofile(os.getenv("HOME") .. "/.config/conky/gtex62-clean-suite/theme.lua")

-- Per-widget knobs with fallbacks
local font_time = theme.font_time or 'DejaVu Sans Mono:size=22'
local font_date = theme.font_date or 'DejaVu Sans Mono:size=12'
local font_gmt  = theme.font_gmt or theme.font_date or 'DejaVu Sans Mono:size=12'

conky.config    = {
  alignment = 'top_left',
  background = false,
  double_buffer = true,
  update_interval = 1,

  use_xft = true,
  font = theme.font or 'DejaVu Sans Mono:size=18', -- base font (unused once we switch with templates)

  own_window = true,
  own_window_type = 'desktop', -- was 'dock'
  own_window_hints = 'undecorated,sticky,skip_taskbar,skip_pager,below',
  own_window_argb_visual = true,
  own_window_argb_value = 0,
  own_window_transparent = true,
  own_window_class = 'Conky',
  -- optional but nice:
  -- own_window_title = 'conky-<name>',  -- e.g., conky-net, conky-notes


  minimum_width = 640,
  minimum_height = 5,

  -- keep your placement
  gap_x = 3805,
  gap_y = 40,

  draw_shades = false,
  draw_borders = false,

  -- colors from theme
  default_color = theme.default_color or 'FFFFFF',
  color1 = theme.color1 or 'A0A0A0',

  -- helpers: font templates (Conky only supports template0..9)
  -- template4 = time font, template5 = date font, template6 = reset, template7 = GMT font
  template4 = "${font " .. font_time .. "}",
  template5 = "${font " .. font_date .. "}",
  template6 = "${font}",                    -- reset
  template7 = "${font " .. font_gmt .. "}", -- NEW
}

conky.text      = [[
${alignc}${template4}${time %H:%M:%S}${template6}
${voffset 4}${alignc}${template7}UTC ${tztime UTC %H:%M} (${time %Z} ${execpi 300 date +%z | awk '{s=substr($0,1,1); h=substr($0,2,2)+0; m=substr($0,4,2)+0; if(m==0) printf("%s%d",s,h); else printf("%s%d:%02d",s,h,m)}'})${template6}
${voffset 4}${alignc}${template5}${time %Y.%m.%d}${template6}

]]
